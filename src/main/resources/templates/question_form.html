<html layout:decorate="~{layout}">

<div layout:fragment="content" class="container">
    <h5 class="my-3 border-bottom pb-2">질문 등록</h5>
    <form th:object="${questionForm}" method="post">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        <div th:replace="~{form_errors :: formErrorsFragment}"></div>
        <div class="mb-3">
            <label for="subject" class="form-label">제목</label>
            <input type="text" th:field="*{subject}" class="form-control">
        </div>
        <div class="mb-3">
            <label for="content" class="form-label">내용</label>
            <div id="editor"></div>
            <input type="hidden" id="content" name="content" th:value="${content}" >
        </div>
        <div class="mb-3">
            <label for="paid" class="form-label">유료글 설정</label>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="paid" id="paidTrue" value="true">
                <label class="form-check-label" for="paidTrue">
                    유료
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="paid" id="paidFalse" value="false" checked>
                <label class="form-check-label" for="paidFalse">
                    무료
                </label>
            </div>
        </div>
        <input type="submit" value="저장하기" class="btn btn-primary my-2">
    </form>
</div>
<script layout:fragment="script" type="text/javascript" th:inline="javascript">
    /*<![CDATA[*/
    const editor = new toastui.Editor({
        el: document.querySelector('#editor'),
        initialEditType: 'markdown',
        previewStyle: 'vertical',
        events: {
            change: function() {
                document.querySelector('#content').value = editor.getMarkdown();
            }
        }
    });
    editor.setMarkdown(/*[[${questionForm.content}]]*/);
    /*]]>*/
</script>

</html>
